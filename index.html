<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal Video Downloader</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="style.css">
    <script>
        // Use Inter font from Google Fonts
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-2xl bg-slate-900/70 backdrop-blur-xl border border-white/10 p-8 rounded-3xl shadow-2xl transition duration-300 hover:shadow-blue-500/50">
        <header class="text-center mb-8">
            <div class="text-4xl font-extrabold text-white mb-2">
                <span class="text-blue-400">Universal </span>Video Downloader
            </div>
            <p class="text-gray-400 text-sm mt-1">Select video quality and format after checking the URL</p>
        </header>

        <main id="form-step">
            <div class="mb-6">
                <label for="videoUrl" class="block text-sm font-medium text-gray-300 mb-2">Paste Video URL</label>
                <input type="url" id="videoUrl" placeholder="e.g., https://www.youtube.com/watch?v=..."
                       class="w-full px-4 py-3 bg-slate-800/50 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:ring-blue-500 focus:border-blue-500 transition duration-150" required>
            </div>
            
            <div id="statusMessage" class="h-8 mb-4 text-center text-red-400 font-medium hidden"></div>

            <button id="checkUrlButton"
                    class="w-full flex items-center justify-center space-x-2 px-4 py-3 border border-transparent text-lg font-bold rounded-xl text-white bg-blue-500 hover:bg-blue-400 focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50 transition duration-150 shadow-lg shadow-blue-500/40"
                    onclick="fetchFormats()">
                <i data-lucide="search" class="w-5 h-5"></i>
                <span>Check URL & Get Formats</span>
            </button>
        </main>

        <div id="loadingArea" class="hidden">
            <p class="text-gray-300 text-center mb-4">Connecting to server...</p>
            <div class="w-full bg-slate-800/50 rounded-full h-2.5 mb-4">
                <div id="progressBar" class="h-2.5 rounded-full bg-blue-500 animate-pulse" style="width: 100%"></div>
            </div>
            <p id="progressText" class="text-sm text-gray-400 text-center">Fetching available qualities and file sizes...</p>
        </div>

        <div id="formats-step" class="hidden">
            <h2 id="videoTitle" class="text-xl font-bold text-white mb-4"></h2>
            
            <div class="mb-6">
                <label for="outputName" class="block text-sm font-medium text-gray-300 mb-2">Custom Output Filename (Optional)</label>
                <input type="text" id="outputName" placeholder="Leave blank for original video title"
                       class="w-full px-4 py-3 bg-slate-800/50 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:ring-blue-500 focus:border-blue-500 transition duration-150">
            </div>

            <p class="text-gray-300 text-sm mb-3 font-semibold">Select Download Quality:</p>

            <h3 class="text-lg font-semibold text-blue-400 mb-2 flex items-center"><i data-lucide="monitor" class="w-5 h-5 mr-2"></i>Video & Audio</h3>
            <div id="videoFormatsList" class="formats-list space-y-3 p-4 bg-slate-800/50 border border-white/10 rounded-xl max-h-80 overflow-y-auto mb-6">
                </div>
            
            <h3 class="text-lg font-semibold text-blue-400 mb-2 flex items-center"><i data-lucide="volume-2" class="w-5 h-5 mr-2"></i>Audio Only (MP3/M4A)</h3>
            <div id="audioFormatsList" class="formats-list space-y-3 p-4 bg-slate-800/50 border border-white/10 rounded-xl max-h-40 overflow-y-auto mb-6">
                </div>


            <button onclick="resetApp()" class="w-full px-4 py-2 text-sm text-gray-400 hover:text-blue-300 transition duration-150">
                <i data-lucide="arrow-left" class="w-4 h-4 inline-block mr-2"></i>
                Go Back / Enter New URL
            </button>
        </div>

        <div id="resultArea" class="hidden mt-8 p-6 bg-green-700/30 border border-green-600 rounded-xl">
            <div class="flex items-center space-x-3">
                <i data-lucide="check-circle" class="w-6 h-6 text-green-400"></i>
                <h3 class="text-xl font-bold text-green-400">Download Ready!</h3>
            </div>
            <p class="text-white mt-3 mb-4">The file has been saved to your local 'downloads' folder. Click below to save it to your device.</p>
            <a id="finalDownloadLink" href="#" download="downloaded_video.mp4"
               class="inline-flex items-center space-x-2 px-4 py-2 border border-green-400 text-base font-medium rounded-xl text-white bg-green-600 hover:bg-green-700 transition duration-150">
                <i data-lucide="file-text" class="w-4 h-4"></i>
                <span>Download Video File</span>
            </a>
            <button onclick="resetApp()" class="ml-4 text-sm text-gray-300 hover:text-white transition">Start New Download</button>
        </div>

    </div>

    <script src="script.js" defer></script>
</body>
</html>